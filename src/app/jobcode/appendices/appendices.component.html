<div class="container my-5">
  <div class="text-center">
    <h2>Organization Chart</h2>
  </div>

  <div class="d-flex justify-content-center">
    <ng-container *ngTemplateOutlet="renderNode; context: { $implicit: orgChart }"></ng-container>
  </div>
</div>

<ng-template #renderNode let-member>
  <div class="text-center p-3 border rounded bg-light m-2 shadow" style="width: 250px;">
    <img [src]="member.image" alt="profile" class="img-thumbnail mb-2"
      style="width: 80px; height: 80px; object-fit: cover;">
    <h6 class="mb-0">{{ member.name }}</h6>
    <small class="text-muted">{{ member.title }}</small>
    <div class="mt-2" *ngIf="member.project"><strong>Project:</strong> {{ member.project }}</div>
    <div *ngIf="member.mobile"><strong>Mobile:</strong> {{ member.mobile }}</div>
    <div *ngIf="member.email"><strong>Email:</strong> {{ member.email }}</div>

    <div *ngIf="member.children?.length" class="d-flex justify-content-center flex-wrap mt-3 border-top pt-3">
      <ng-container *ngFor="let child of member.children">
        <ng-container *ngTemplateOutlet="renderNode; context: { $implicit: child }"></ng-container>
      </ng-container>
    </div>
  </div>
</ng-template>